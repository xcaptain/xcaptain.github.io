---
title: 微信平台开发流程总结
date: "2018-03-08"
layout: post
draft: false
path: "/posts/wechat-platform-development/"
category: "Web"
tags:
  - "Web"
description: "使用过微信开放平台的多种功能，以下进行一个总结备忘..."
---

基于微信开放平台的接口可以做很多东西，比如说微信登录、微信支付、现金红包、小程序等，那么微信开发该从哪方面开始呢，这些接口之间有哪些互通的地方，正好最近做了一个微信帐号变更主体相关的工作，来总结一下之前做过的事情

# 名词解释

## 微信开放平台 [官方链接](https://open.weixin.qq.com/)

微信开放平台是一切微信开发的基础，首先得注册开放平台帐号，可能要填一些公司信息，然后等待微信审核。等帐号审核通过之后，就能创建应用了。网站应用一般指的是H5应用，也可能做到PC端上，如扫码登录，移动应用指的是iOS,android平台的开发，比如说在android上执行微信登录，公众号应用就是创建一个公众号，基本和技术无关。

## 微信公众平台

微信公众平台是微信公众号的管理后台，如发布新的文章，回复粉丝留言，查看数据变更，当然还包括一些基本的开发设置，如<strong>微信登录配置</strong>，公众号回调的一些配置

## 微信商户平台

微信商户平台是给商户对账用的，基本流程是先提交公司信息注册帐号，等微信审核之后就能登录后台，然后会有各种功能，与开发相关的功能有微信支付配置(merchant_id, payment_key, 支付证书文件，授权回调域)

# 微信开发的基本流程

一个企业可能会做很多微信相关的产品，比如说小程序，H5页面，服务号，有一点很重要的就是要有微信登录，如果能保证一个公司内部所有微信产品帐号互通当然是更好的了。一个简单的例子见下：

1. 在开放平台注册一个网站应用，填写好对应的app_id, app_secret
1. 在公众平台注册一个服务号，并且在开发-基本配置 中填写好服务器地址、Token、EncodingAESKey，消息模式建议选安全模式
1. 开始编写服务端的代码，对于php项目来说可以考虑[easywechat](https://github.com/overtrue/wechat)，很方便快速开发
1. 按照文档去开发微信登录接口，oauth的模式基本可以理解为用户访问自己网站的一个链接，重定向到微信授权页面，点击确认之后微信服务器回调自己网站的接口，回调成功之后用户被重定向到新的页面，微信回调这段可以做很多事情，比如说保存微信用户信息，生成本地的jwt token，重定向过程中可以把部分信息通过cookie或者拼接到url上的形式返回给用户

以上描述了简单的微信登录接口的开发，微信支付也差不多，不过支付分的方式比较多如公众号支付，APP支付，小程序支付，核心功能都差不多。
